<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URL Clustering Analysis - Hierarchical Clustering Explorer</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23667eea'/%3E%3Cstop offset='100%25' style='stop-color:%23764ba2'/%3E%3C/linearGradient%3E%3C/defs%3E%3Cpath d='M50 10 L20 25 L20 50 Q20 75 50 90 Q80 75 80 50 L80 25 Z' fill='url(%23g)' opacity='0.3' stroke='url(%23g)' stroke-width='3'/%3E%3Crect x='40' y='50' width='20' height='20' rx='2' fill='url(%23g)'/%3E%3Cpath d='M45 50 L45 42 Q45 35 50 35 Q55 35 55 42 L55 50' fill='none' stroke='url(%23g)' stroke-width='3.5'/%3E%3Ccircle cx='50' cy='58' r='2.5' fill='white'/%3E%3Crect x='48.5' y='58' width='3' height='6' fill='white'/%3E%3C/svg%3E">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
</head>
<body>
    <!-- Skip to content for accessibility -->
    <a href="#main-content" class="skip-to-content">Skip to main content</a>

    <!-- Header -->
    <header class="header" id="header" role="banner">
        <a href="#home" class="logo-container">
            <div class="logo">
                <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <!-- Shield -->
                    <path d="M50 10 L20 25 L20 50 Q20 75 50 90 Q80 75 80 50 L80 25 Z" fill="url(#grad1)" opacity="0.2" stroke="url(#grad1)" stroke-width="2"/>
                    <!-- Lock body -->
                    <rect x="40" y="50" width="20" height="20" rx="2" fill="url(#grad1)"/>
                    <!-- Lock shackle -->
                    <path d="M45 50 L45 42 Q45 35 50 35 Q55 35 55 42 L55 50" fill="none" stroke="url(#grad1)" stroke-width="3" stroke-linecap="round"/>
                    <!-- Keyhole -->
                    <circle cx="50" cy="58" r="2.5" fill="rgba(255,255,255,0.8)"/>
                    <rect x="48.5" y="58" width="3" height="6" fill="rgba(255,255,255,0.8)"/>
                    <!-- Binary code dots (cybersecurity theme) -->
                    <circle cx="30" cy="35" r="1.5" fill="url(#grad1)" opacity="0.6"/>
                    <circle cx="35" cy="38" r="1.5" fill="url(#grad1)" opacity="0.6"/>
                    <circle cx="65" cy="38" r="1.5" fill="url(#grad1)" opacity="0.6"/>
                    <circle cx="70" cy="35" r="1.5" fill="url(#grad1)" opacity="0.6"/>
                </svg>
            </div>
            <div class="logo-text">URL Analysis</div>
        </a>
        
        <nav class="main-menu" id="mainMenu">
            <a href="#home" class="menu-item active">Home</a>
            <a href="#education" class="menu-item">Learn</a>
            <a href="#about" class="menu-item">About</a>
            <a href="https://github.com/Kyne0328/URL-Analysis" rel="noopener noreferrer" class="menu-item external">GitHub</a>
        </nav>
        
        <div class="menu-toggle" id="menuToggle">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </header>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer" role="status" aria-live="polite"></div>

    <!-- Chart Fullscreen Modal -->
    <div class="chart-modal" id="chartModal" role="dialog" aria-modal="true" aria-label="Chart fullscreen view">
        <button class="chart-modal-close" id="chartModalClose" aria-label="Close fullscreen chart">
            <i class="fas fa-times"></i>
        </button>
        <img id="chartModalImage" alt="Fullscreen chart visualization">
    </div>

    <!-- Home Section with URL Analysis -->
    <section id="home" class="section url-analysis-section" id="main-content" role="main">
        <div class="analysis-container">
            <!-- Important Disclaimer - Moved to Top -->
            <div class="disclaimer">
                <div class="disclaimer-title">
                    <i class="fas fa-exclamation-triangle"></i>
                    Important: This is NOT a Phishing Detection System
                </div>
                <div class="disclaimer-text">
                    <p><strong>What this tool does:</strong> This is an unsupervised clustering analysis tool that groups URLs based on structural similarity patterns. It shows you which cluster a URL belongs to and how unusual it appears compared to the training dataset.</p>
                    <p><strong>What this tool does NOT do:</strong> This is NOT a definitive phishing detector. It cannot determine if a URL is actually malicious or safe. The clustering is based only on URL structure features, not content analysis or threat intelligence.</p>
                    <p><strong>Understanding the results:</strong> "Similarity" scores show how closely a URL matches its assigned cluster's pattern. "Mixed Pattern Group" means the cluster contains both legitimate and suspicious URLs with similar structures - this is normal and shows why clustering â‰  security detection.</p>
                    <p><strong>Use responsibly:</strong> Use this tool for educational purposes, pattern exploration, and understanding how clustering algorithms work. Do not rely on it for security decisions.</p>
                </div>
            </div>

            <!-- URL Input Form -->
            <div class="url-input-form">
                <h2><i class="fas fa-project-diagram"></i> Hierarchical Clustering Analysis</h2>
                <p style="margin-bottom: 20px;">Explore URL patterns using Ward linkage hierarchical clustering - discover structural similarities and cluster relationships</p>
                
                <form id="urlForm" role="search" aria-label="URL Analysis Form">
                    <div class="url-input-group">
                        <div class="url-input-wrapper">
                            <label for="urlInput" class="sr-only">URL to analyze</label>
                            <input type="text" class="url-input" id="urlInput" 
                                   placeholder="Enter URL to analyze (e.g., https://example.com)" 
                                   required
                                   autocomplete="off"
                                   spellcheck="false"
                                   aria-describedby="urlHelp"
                                   aria-invalid="false">
                            <span class="validation-icon" id="validationIcon" aria-hidden="true">
                                <i class="fas fa-check-circle"></i>
                            </span>
                            <span id="urlHelp" class="sr-only">Enter a complete URL including protocol (http or https)</span>
                        </div>
                        <button class="btn-analyze" type="submit" id="analyzeBtn" aria-label="Analyze URL pattern">
                            <i class="fas fa-search" aria-hidden="true"></i>
                            <span>Analyze</span>
                        </button>
                    </div>
                    
                    <!-- Example URLs -->
                    <div class="example-urls">
                        <small style="color: rgba(255, 255, 255, 0.6); margin-right: 10px;">Try examples:</small>
                        <button type="button" class="example-btn" data-url="https://www.google.com">
                            <i class="fas fa-globe"></i> Google
                        </button>
                        <button type="button" class="example-btn" data-url="https://github.com">
                            <i class="fab fa-github"></i> GitHub
                        </button>
                        <button type="button" class="example-btn" data-url="https://stackoverflow.com">
                            <i class="fab fa-stack-overflow"></i> StackOverflow
                        </button>
                        <button type="button" class="example-btn" data-url="http://suspicious-site-login.tk">
                            <i class="fas fa-exclamation-triangle"></i> Suspicious Example
                        </button>
                    </div>
                </form>
                
                <div class="loading-spinner" id="loadingSpinner">
                    <div class="spinner"></div>
                    <p>Building hierarchical clustering tree and analyzing URL patterns...</p>
                </div>
            </div>

            <!-- Results Section -->
            <div id="resultsSection" class="results-section">
                <div class="result-card">
                    <div class="result-header">
                        <div class="result-icon" id="resultIcon">
                            <i class="fas fa-question-circle"></i>
                        </div>
                        <div>
                            <h3 class="result-title" id="resultTitle">Analysis Results</h3>
                            <p id="resultSubtitle">URL pattern analysis complete</p>
                        </div>
                    </div>
                    
                    <div class="result-details" id="resultDetails">
                        <!-- Dynamic content will be inserted here -->
                    </div>
                </div>

                <!-- Neighbors Section -->
                <div class="neighbors-section" id="neighborsSection" style="display: none;">
                    <h3 class="neighbors-title">
                        <i class="fas fa-users me-2"></i>
                        Most Similar URLs in Dataset
                    </h3>
                    <div class="neighbors-grid" id="neighborsGrid">
                        <!-- Dynamic content will be inserted here -->
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="charts-section" id="chartsSection" style="display: none;">
                    <div class="chart-container">
                        <h4 class="chart-title">
                            <i class="fas fa-project-diagram me-2"></i>
                            Clustering Tree
                        </h4>
                        <div id="mainDendrogramPlot">
                            <!-- Chart will be inserted here -->
                        </div>
                    </div>
                    <div class="chart-container">
                        <h4 class="chart-title">
                            <i class="fas fa-chart-line me-2"></i>
                            URL Pattern Analysis
                        </h4>
                        <div id="urlAnalysisPlot">
                            <!-- Chart will be inserted here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

            <!-- Educational Section -->
    <section id="education" class="section">
        <div class="education-content">
            <div class="education-header">
                <h2><i class="fas fa-graduation-cap"></i> Learn Hierarchical Clustering</h2>
                <p>Understand how Ward linkage clustering works through interactive examples and visualizations</p>
            </div>
            
            <div class="education-grid">
                <div class="education-card">
                    <div class="education-icon">
                        <i class="fas fa-project-diagram"></i>
                    </div>
                    <h3>What is Hierarchical Clustering?</h3>
                    <p>Hierarchical clustering builds a tree-like structure (<span data-tooltip="A tree diagram showing the complete clustering hierarchy, with branches representing cluster merges and heights showing distances">dendrogram</span>) showing how data points group together. Unlike K-means, you don't need to specify the number of clusters upfront.</p>
                    <ul>
                        <li><strong>Bottom-up approach:</strong> Starts with individual points as separate clusters</li>
                        <li><strong>Iterative merging:</strong> Combines most similar clusters at each step</li>
                        <li><strong>Dendrogram:</strong> Visual tree showing complete clustering hierarchy</li>
                        <li><strong>Cut-off point:</strong> Choose where to "cut" the tree to get final clusters</li>
                    </ul>
                </div>
                
                <div class="education-card">
                    <div class="education-icon">
                        <i class="fas fa-link"></i>
                    </div>
                    <h3>Ward Linkage Method</h3>
                    <p><span data-tooltip="A linkage criterion that minimizes the sum of squared distances within clusters when merging">Ward linkage</span> minimizes the within-cluster variance when merging clusters. It's excellent for creating compact, well-separated clusters.</p>
                    <ul>
                        <li><strong>Ward's criterion:</strong> Minimizes sum of squared distances within clusters</li>
                        <li><strong>Compact clusters:</strong> Creates tight, spherical cluster shapes</li>
                        <li><strong>Good for:</strong> Data with similar cluster sizes and shapes</li>
                        <li><strong>Distance metric:</strong> Uses Euclidean distance in feature space</li>
                    </ul>
                </div>
                
                <div class="education-card">
                    <div class="education-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <h3>Reading Dendrograms</h3>
                    <p>Dendrograms show the complete clustering process. Learn to interpret the tree structure and distance metrics.</p>
                    <ul>
                        <li><strong>Y-axis:</strong> Distance between clusters (higher = more different)</li>
                        <li><strong>X-axis:</strong> Individual data points or cluster sizes</li>
                        <li><strong>Branch height:</strong> When clusters were merged</li>
                        <li><strong>Color coding:</strong> Different colors represent different clusters</li>
                    </ul>
                </div>
                
                <div class="education-card">
                    <div class="education-icon">
                        <i class="fas fa-cogs"></i>
                    </div>
                    <h3>URL Feature Engineering</h3>
                    <p>We extract 29 features from URLs to create a <span data-tooltip="A mathematical space where each URL is represented as a point with 29 coordinates (features)">multi-dimensional space</span> for clustering analysis.</p>
                    <ul>
                        <li><strong>Length features:</strong> URL length, domain length, path length</li>
                        <li><strong>Character analysis:</strong> Special characters, digits, entropy</li>
                        <li><strong>Structure features:</strong> Subdomains, TLD, query parameters</li>
                        <li><strong>Pattern detection:</strong> Suspicious keywords, IP addresses</li>
                    </ul>
                </div>
            </div>
            
            
            <div class="clustering-focus">
                <h3><i class="fas fa-project-diagram"></i> Why Hierarchical Clustering for URL Analysis?</h3>
                <div class="focus-content">
                    <div class="focus-highlight">
                        <h4>Perfect for Pattern Discovery</h4>
                        <p>Hierarchical clustering is ideal for URL analysis because it reveals the complete relationship structure between similar URLs, showing not just which URLs belong together, but <em>how closely</em> they are related at different similarity levels.</p>
                    </div>

                    <div class="advantages-grid">
                        <div class="advantage-card">
                            <div class="advantage-icon">
                                <i class="fas fa-tree"></i>
                            </div>
                            <h5>Complete Hierarchy</h5>
                            <p>Shows the full clustering tree (dendrogram) revealing how URL patterns merge at different similarity levels</p>
                        </div>

                        <div class="advantage-card">
                            <div class="advantage-icon">
                                <i class="fas fa-search"></i>
                            </div>
                            <h5>No Pre-defined Clusters</h5>
                            <p>Discovers the natural number of URL pattern groups without guessing how many clusters exist</p>
                        </div>

                        <div class="advantage-card">
                            <div class="advantage-icon">
                                <i class="fas fa-brain"></i>
                            </div>
                            <h5>Interpretability</h5>
                            <p>Results are easy to understand and explain - you can see exactly why URLs were grouped together</p>
                        </div>

                        <div class="advantage-card">
                            <div class="advantage-icon">
                                <i class="fas fa-route"></i>
                            </div>
                            <h5>Ward Linkage Method</h5>
                            <p>Uses Ward's method which minimizes within-cluster variance, creating compact and meaningful URL pattern groups</p>
                        </div>
                    </div>

                    <div class="method-explanation">
                        <h4>URL Pattern Analysis Workflow</h4>
                        <div class="workflow-steps">
                            <div class="step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h6>Feature Extraction</h6>
                                    <p>Extract 29 structural features from URLs (length, entropy, special characters, etc.)</p>
                                </div>
                            </div>
                            <div class="step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h6>Hierarchical Clustering</h6>
                                    <p>Build complete dendrogram using Ward linkage to show URL pattern relationships</p>
                                </div>
                            </div>
                            <div class="step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h6>Cluster Purity Analysis</h6>
                                    <p>Analyze the composition of each cluster by counting known legitimate and suspicious URLs to determine its risk profile</p>
                                </div>
                            </div>
                            <div class="step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <h6>Similarity Analysis</h6>
                                    <p>Find nearest neighbors and calculate pattern similarity scores</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

            <!-- About Section -->
    <section id="about" class="section">
        <div class="about-content">
            <div class="about-header">
                <h2>Discover URL Clustering Analysis</h2>
                <p>A powerful tool for exploring URL patterns using hierarchical clustering and machine learning techniques</p>
            </div>
            
            <div class="about-main">
                <div class="about-visual">
                    <div class="showcase-display">
                        <div class="showcase-main">
                            <div class="corner-decoration top-left"></div>
                            <div class="corner-decoration bottom-right"></div>
                            
                            <div class="showcase-logo">
                                <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                    <!-- Shield -->
                                    <path d="M50 15 L25 27 L25 50 Q25 70 50 85 Q75 70 75 50 L75 27 Z" fill="rgba(255,255,255,0.15)" stroke="white" stroke-width="2.5"/>
                                    <!-- Lock body -->
                                    <rect x="42" y="52" width="16" height="16" rx="2" fill="white"/>
                                    <!-- Lock shackle -->
                                    <path d="M46 52 L46 45 Q46 40 50 40 Q54 40 54 45 L54 52" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round"/>
                                    <!-- Keyhole -->
                                    <circle cx="50" cy="58" r="2" fill="rgba(102, 126, 234, 0.8)"/>
                                    <rect x="48.8" y="58" width="2.4" height="5" fill="rgba(102, 126, 234, 0.8)"/>
                                </svg>
                            </div>
                            
                            <h3 class="showcase-title">URL Analysis</h3>
                            <p class="showcase-subtitle">Transform URL patterns into insights with advanced clustering algorithms</p>
                            
                            <div class="showcase-badges">
                                <a href="#" class="badge">Machine Learning</a>
                                <a href="#" class="badge">Hierarchical Clustering</a>
                                <a href="#" class="badge">Pattern Recognition</a>
                                <a href="#" class="badge">Data Science</a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="about-info">
                    <h3>Hierarchical Clustering Explorer</h3>
                    <p>Our URL clustering analysis tool uses Ward linkage hierarchical clustering to identify structural patterns in URLs. By analyzing 29 features including domain length, entropy, special characters, and subdomain usage, we build a complete dendrogram showing how URLs cluster together based on similarity.</p>
                    <p>This tool demonstrates advanced unsupervised learning techniques, perfect for educational purposes, cybersecurity research, and understanding how different URL structures relate to each other. Explore the complete clustering hierarchy and discover which URLs share similar patterns.</p>
                    
                    <ul class="feature-list">
                        <li>Ward linkage hierarchical clustering algorithm</li>
                        <li>29-dimensional feature space analysis</li>
                        <li>Interactive dendrogram with cluster hierarchy</li>
                        <li>Distance-based nearest neighbor analysis</li>
                        <li>Adaptive threshold clustering with purity metrics</li>
                        <li>Ensemble approach combining clustering + anomaly detection</li>
                    </ul>
                    
                    <a href="#home" class="cta-button">
                        Start Analysis
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M5 12h14m-7-7l7 7-7 7" stroke="currentColor" stroke-width="2" fill="none"/>
                        </svg>
                    </a>
                </div>
            </div>
            
            <div class="stats-section">
                <div class="stat-item">
                    <div class="stat-number">29</div>
                    <div class="stat-label">Feature Dimensions</div>
                    <div class="stat-description">URL entropy, length, special chars, and 26 more features</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">60K+</div>
                    <div class="stat-label">URLs in Training Set</div>
                    <div class="stat-description">Trained on a balanced, stratified sample from a 450K+ URL dataset</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">3</div>
                    <div class="stat-label">ML Models</div>
                    <div class="stat-description">Hierarchical Clustering + Isolation Forest + Rule-Based</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">>85%</div>
                    <div class="stat-label">Avg. Cluster Purity</div>
                    <div class="stat-description">The model forms high-purity clusters, where the dominant pattern (e.g., suspicious) makes up over 85% of the members</div>
                </div>
            </div>

            <!-- Team Section -->
            <div class="team-section">
                <h3 class="team-title">Meet The Team</h3>
                <p class="team-subtitle">CST 9/L - 1752: Machine Learning 1 | University of Mindanao - Cybersecurity Track</p>
                <div class="team-grid">
                    <div class="team-card">
                        <div class="team-avatar">
                            <i class="fas fa-user-graduate"></i>
                        </div>
                        <h4 class="team-name">Alexander L. Arche</h4>
                        <p class="team-role">Developer</p>
                    </div>
                    <div class="team-card">
                        <div class="team-avatar">
                            <i class="fas fa-user-graduate"></i>
                        </div>
                        <h4 class="team-name">Kyne Anthony F. Pizon</h4>
                        <p class="team-role">Developer</p>
                    </div>
                    <div class="team-card">
                        <div class="team-avatar">
                            <i class="fas fa-user-graduate"></i>
                        </div>
                        <h4 class="team-name">Gerald Andrei P. Villa</h4>
                        <p class="team-role">Developer</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-copyright">
                Â© 2025 URL Clustering Analysis. All rights reserved.
            </div>
        </div>
    </footer>

    <!-- Scroll to top button -->
    <div class="scroll-to-top" id="scrollToTop">
        <span>â†‘</span>
    </div>

    <script src="{{ url_for('static', filename='js/navigation.js') }}"></script>
    <script src="{{ url_for('static', filename='js/validation.js') }}"></script>
    <script src="{{ url_for('static', filename='js/ui.js') }}"></script>
    <script src="{{ url_for('static', filename='js/charts.js') }}"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
